<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Titre SEO optimisé -->
    <title>Pré-inscription Ketoko | Marketplace Panafricaine | Concours Exclusif</title>
    
    <!-- Meta Description optimisée -->
    <meta name="description" content="Pré-inscrivez-vous sur Ketoko, la marketplace panafricaine, et participez à notre jeu concours exclusif. Soyez parmi les premiers à découvrir l'application révolutionnaire de e-commerce en Afrique.">
    
    <!-- Keywords optimisées -->
    <meta name="keywords" content="pré-inscription ketoko, inscription marketplace afrique, concours ketoko, ecommerce afrique, application ketoko, préinscription plateforme africaine">
    
    <!-- Open Graph optimisé -->
    <meta property="og:title" content="Pré-inscription Ketoko | Concours Marketplace Panafricaine">
    <meta property="og:description" content="Pré-inscrivez-vous et participez au jeu concours exclusif Ketoko. Soyez parmi les premiers à utiliser l'application révolutionnaire de e-commerce en Afrique.">
    <meta property="og:image" content="https://ketoko-app.netlify.app/imgs/logo.jpg">
    <meta property="og:url" content="https://ketoko-app.netlify.app/inscription.html">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Ketoko">
    <meta property="og:locale" content="fr_FR">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://ketoko-app.netlify.app/inscription.html" />

    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="57x57" href="./imgs/icons.ico/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="./imgs/icons.ico/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="./imgs/icons.ico/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="./imgs/icons.ico/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="./imgs/icons.ico/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="./imgs/icons.ico/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="./imgs/icons.ico/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="./imgs/icons.ico/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="./imgs/icons.ico/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="./imgs/icons.ico/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./imgs/icons.ico/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="./imgs/icons.ico/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./imgs/icons.ico/favicon-16x16.png">
    <link rel="manifest" href="./imgs/icons.ico/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="./imgs/icons.ico/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    
    <!-- Structured Data pour la page d'inscription -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Event",
        "name": "Pré-inscription Ketoko - Jeu Concours",
        "description": "Pré-inscrivez-vous sur Ketoko et participez à notre jeu concours exclusif pour gagner des prix exceptionnels",
        "startDate": "2024-01-01",
        "endDate": "2025-10-05",
        "eventStatus": "https://schema.org/EventScheduled",
        "eventAttendanceMode": "https://schema.org/OnlineEventAttendanceMode",
        "location": {
            "@type": "VirtualLocation",
            "url": "https://ketoko-app.netlify.app/inscription.html"
        },
        "organizer": {
            "@type": "Organization",
            "name": "Ketoko",
            "url": "https://ketoko-app.netlify.app"
        },
        "offers": {
            "@type": "Offer",
            "url": "https://ketoko-app.netlify.app/inscription.html",
            "price": "0",
            "priceCurrency": "XAF",
            "availability": "https://schema.org/InStock",
            "validFrom": "2024-01-01"
        }
    }
    </script>
    
    <!-- Twitter Card optimisé -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site"  content="@ketoko">
    <meta name="twitter:title" content="Pré-inscription Ketoko | Concours Marketplace Panafricaine">
    <meta name="twitter:description" content="Pré-inscrivez-vous et participez au jeu concours exclusif Ketoko. Soyez parmi les premiers à utiliser l'application révolutionnaire de e-commerce en Afrique.">
    <meta name="twitter:image" content="https://ketoko-app.netlify.app/imgs/logo.jpg">
    
    <!-- Préchargement des ressources -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"></noscript>
    
    <!-- CSS et JS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=download" />
    
    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }
        .modal-overlay {
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
        }
        .modal-enter {
            animation: modalEnter 0.5s ease-out forwards;
        }
        .modal-exit {
            animation: modalExit 0.3s ease-in forwards;
        }
        @keyframes modalEnter {
            from {
                opacity: 0;
                transform: scale(0.9) translateY(-20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }
        @keyframes modalExit {
            from {
                opacity: 1;
                transform: scale(1);
            }
            to {
                opacity: 0;
                transform: scale(0.9) translateY(-20px);
            }
        }
        .logo-pulse {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #f00;
            animation: confetti-fall 3s linear forwards;
            z-index: 9999;
        }
        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(360deg);
            }
        }
        /* Améliorations accessibilité */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
    </style>
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-HZG68D6FH6"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-HZG68D6FH6');
    </script>
</head>

<body class="bg-gray-50" itemscope itemtype="https://schema.org/WebPage">
    <!-- Navigation de retour -->
    <nav aria-label="Navigation principale">
        <div
        onclick="window.history.back()"
        class="exit-float absolute top-5 left-5 w-16 h-16 bg-green-700 rounded-full flex items-center justify-center bg-opacity-70 z-50 cursor-pointer hover:bg-green-800 transition-all duration-300 logo-pulse"
        title="Retour à l'accueil Ketoko">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgba(255, 255, 255, 1);" aria-hidden="true">
                <path d="M21 11H6.414l5.293-5.293-1.414-1.414L2.586 12l7.707 7.707 1.414-1.414L6.414 13H21z"></path>
            </svg>
            <span class="sr-only">Retour à la page d'accueil Ketoko</span>
        </div>
    </nav>

    <!-- Contenu principal -->
    <main itemprop="mainContentOfPage">
        <div class="min-h-screen flex justify-center">
            <div class="m-0 bg-white shadow-xl rounded-lg flex justify-center flex-1 overflow-hidden">
                <div class="lg:w-1/2 xl:w-5/12 p-6 h-screen flex flex-col justify-center items-center">  
                    <div class="mt-12 flex flex-col justify-center h-screen items-center">
                        <h1 class="text-2xl xl:text-3xl font-extrabold text-center text-green-800" itemprop="headline">Pré-inscription Ketoko en temp que vendeur </h1>
                        <p class="text-sm mt-4 text-center text-gray-600" itemprop="description">
                           inscrivez vous a application de e-commerce la plus révolutionnaire en Afrique et participez a notre jeu concours exclusif.
                        </p>
                        
                        <form id="registrationForm" class="mt-8 w-full max-w-md" itemscope itemtype="https://schema.org/RegisterAction">
                            <div class="space-y-4">
                                <div>
                                    <label for="fullName" class="sr-only">Nom complet</label>
                                    <input
                                        id="fullName"
                                        class="w-full px-4 py-3 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-green-500 focus:bg-white transition-all duration-300"
                                        type="text" 
                                        placeholder="Nom complet" 
                                        required
                                        itemprop="name">
                                </div>
                                <div>
                                    <label for="societe" class="sr-only">Nom de la société</label>
                                    <input
                                        id="societe"
                                        class="w-full px-4 py-3 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-green-500 focus:bg-white transition-all duration-300"
                                        type="text" 
                                        placeholder="Nom de la société" 
                                        required
                                        itemprop="name">
                                </div>
                                 
                                
                                <div>
                                    <label for="phoneInput" class="sr-only">Numéro de téléphone</label>
                                    <input
                                        id="phoneInput"
                                        class="w-full px-4 py-3 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-green-500 focus:bg-white transition-all duration-300"
                                        type="tel" 
                                        placeholder="Numéro de téléphone"
                                        pattern="[0-9]{9,15}"
                                        title="Veuillez entrer un numéro de téléphone valide">
                                </div>

                                 <div>
                                    <label for="adresse" class="sr-only">Adresse</label>
                                    <input
                                        id="adresse"
                                        class="w-full px-4 py-3 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-green-500 focus:bg-white transition-all duration-300"
                                        type="text"
                                        placeholder="Adresse"
                                        
                                        title="Veuillez entrer une adresse valide">
                                </div>
                                 
                                <div class="border-b text-center">
                                    <div class="leading-none px-2 inline-block text-sm text-gray-600 tracking-wide font-medium bg-white transform translate-y-1/2">
                                        Ou inscrivez-vous avec un e-mail
                                    </div>
                                </div>
                                <br>
    
                                <div>
                                    <label for="emailInput" class="sr-only">Adresse email</label>
                                    <input
                                        id="emailInput"
                                        class="w-full px-4 py-3 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-green-500 focus:bg-white transition-all duration-300"
                                        type="email" 
                                        placeholder="Adresse email"
                                        itemprop="email">
                                    <input
                                        id="type_user"
                                        class="w-full hidden px-4 py-3 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-green-500 focus:bg-white transition-all duration-300"
                                        type="text"  
                                        itemprop="type"
                                        value="demarcheur">
                                </div>
                                
                                <button
                                    type="submit"
                                    class="mt-8 tracking-wide font-semibold bg-green-800 text-white w-full py-3 rounded-lg hover:bg-green-700 transition-all duration-300 flex items-center justify-center focus:shadow-outline focus:outline-none"
                                    itemprop="potentialAction">
                                    <span>Commencer l'inscription</span>
                                </button>
                                
                                <!-- Microdata caché pour le concours -->
                                <div itemprop="object" itemscope itemtype="https://schema.org/Event" style="display:none;">
                                    <span itemprop="name">Jeu Concours Ketoko</span>
                                    <span itemprop="description">Concours exclusif pour les premiers inscrits sur la plateforme Ketoko</span>
                                    <meta itemprop="startDate" content="2024-01-01">
                                    <meta itemprop="endDate" content="2025-10-05">
                                </div>
                            </div>
                        </form>
                        
                        <!-- Informations supplémentaires SEO -->
                        <div class="mt-6 text-xs text-gray-500 text-center">
                            <p>En vous pré-inscrivant, vous acceptez nos <a href="/conditions-utilisation.html" class="text-green-700 hover:underline">conditions d'utilisation</a> 
                            et notre <a href="/politique-confidentialite.html" class="text-green-700 hover:underline">politique de confidentialité</a>.</p>
                        </div>
                    </div>
                </div>
                
                <!-- Section visuelle avec image optimisée -->
                <div class="flex-1   text-center hidden lg:flex" role="img" aria-label="Illustration de la plateforme Ketoko - Marketplace panafricaine">
                    <div class="w-full h-full bg-contain bg-top bg-no-repeat"
                          style="background-image: url('../imgs/logo.png');">
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal de succès avec microdonnées -->
    <div id="successModal" class="fixed inset-0 z-50 hidden items-center justify-center modal-overlay" aria-labelledby="modalTitle" aria-describedby="modalDesc">
        <div class="bg-white rounded-lg shadow-xl max-w-md w-full mx-4 modal-enter" itemscope itemtype="https://schema.org/Message">
            <div class="p-6">
                <div class="text-center">
                    <div class="mb-4">
                        <svg class="mx-auto h-16 w-16 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>
                    <h3 id="modalTitle" class="text-lg font-medium text-gray-900 mb-2" itemprop="name">Inscription réussie !</h3>
                    <p id="modalDesc" class="text-sm text-gray-500 mb-6" itemprop="text">
                        Félicitations ! Votre pré-inscription Ketoko est confirmée. Vous êtes maintenant éligible pour participer à notre tirage au sort exclusif.
                    </p>
                    
                    <div class="flex justify-center space-x-4 mb-6">
                        <a href="https://www.facebook.com/profile.php?id=61580551694187" class="social-link text-blue-600 hover:text-blue-800 transition-colors duration-300" 
                           aria-label="Suivez Ketoko sur Facebook" title="Page Facebook Ketoko">
                            <i class="fab fa-facebook-f text-xl"></i>
                        </a>
                       
                        <a href="https://www.instagram.com/a.k.o_groupe" class="social-link text-pink-600 hover:text-pink-800 transition-colors duration-300" 
                           aria-label="Suivez Ketoko sur Instagram" title="Compte Instagram Ketoko">  
                            <i class="fab fa-instagram text-xl"></i>
                        </a>
                        <a href="https://www.tiktok.com/@a.k.o_groupe" class="social-link text-black hover:text-gray-800 transition-colors duration-300" 
                           aria-label="Suivez Ketoko sur TikTok" title="Compte TikTok Ketoko">  
                            <i class="fab fa-tiktok text-xl"></i>
                        </a>
                        <a href="https://www.whatsapp.com/send?phone=+242068601616" class="social-link text-green-600 hover:text-green-800 transition-colors duration-300" 
                           aria-label="Contactez Ketoko sur WhatsApp" title="Contact WhatsApp Ketoko"> 
                            <i class="fab fa-whatsapp text-xl"></i>
                        </a>
                    </div>
                    
                    <button 
                     onclick="window.location.href='https://www.tiktok.com/@a.k.o_groupe'"
                     id="closeModal" class="w-full bg-green-800 text-white py-2 px-4 rounded-md hover:bg-green-700 transition-colors duration-300">
                        Fermer et continuer
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Container pour confettis -->
    <div id="confettiContainer"></div>

    <!-- Scripts en bas de page pour performance -->
    <script src="https://cdn.jsdelivr.net/npm/confetti-js@0.0.18/dist/index.min.js"></script>
    
    <!-- Supabase Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
        <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/confetti-js@0.0.18/dist/index.min.js"></script>
    
    <!-- Supabase Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <script>
        // Initialize Supabase client
        const supabaseUrl = 'https://godhvvxapbtghchfrcxz.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdvZGh2dnhhcGJ0Z2hjaGZyY3h6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkxMDEyMDgsImV4cCI6MjA3NDY3NzIwOH0.RK0-YEzLACd8BuCtmwfRNZEgNKlxD5pjQHCraqXANNs';
        const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('registrationForm');
            const modal = document.getElementById('successModal');
            const closeModalBtn = document.getElementById('closeModal');
            const phoneInput = document.getElementById('phoneInput');
            const emailInput = document.getElementById('emailInput');
            const socialLinks = document.querySelectorAll('.social-link');
            const type_user = document.getElementById('type_user');
            const adresse = document.getElementById('adresse');
            const societe = document.getElementById('societe');
            
            // Form submission handler
            form.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                // Validate that either phone or email is filled
                const phoneValue = phoneInput.value.trim();
                const emailValue = emailInput.value.trim();
                
                if (!phoneValue && !emailValue) {
                    alert('Veuillez entrer soit votre numéro de téléphone soit votre adresse email.');
                    return;
                }
                
                // Get form data
                const fullName = form.querySelector('input[type="text"]').value;
                const userData = {
                    fullname: fullName,
                    phone: phoneValue || null,
                    mail: emailValue || null,
                    type_user: type_user.value   ,
                    adresse: adresse.value || null,
                    societe: societe.value || null,

                };
                
                try {
                    // Test connection to Supabase
                    console.log('Tentative de connexion à Supabase...');
                    const testResponse = await supabase.from('userData').select('*').limit(1);
                    
                    if (testResponse.error) {
                        console.error('Erreur de connexion à Supabase:', testResponse.error);
                        throw new Error('Impossible de se connecter à la base de données');
                    }
                    
                    console.log('Connexion à Supabase réussie');
                    
                    // Insert data into Supabase
                    console.log('Envoi des données:', userData);
                    const { data, error } = await supabase
                        .from('userData')
                        .insert([userData]);
                        
                    if (error) {
                        console.error('Erreur détaillée lors de l\'insertion:', error);
                        throw error;
                    }
                    
                    console.log('Données enregistrées avec succès:', data);
                    
                    // Show success modal
                    modal.classList.remove('hidden');
                    modal.classList.add('flex');
                    
                    // Reset form
                    form.reset();
                    
                } catch (error) {
                    console.error('Erreur complète:', error);
                    
                    // Afficher un message d'erreur plus détaillé
                    let errorMessage = 'Une erreur est survenue lors de l\'inscription.';
                    
                    if (error.code === '42501') {
                        errorMessage += ' Veuillez vérifier vos identifiants Supabase.';
                    } else if (error.code === '42P01') {
                        errorMessage += ' La table "userData" n\'existe pas.';
                    } else if (error.code === '23502') {
                        errorMessage += ' Un champ obligatoire est manquant.';
                    } else if (error.code === '42883') {
                        errorMessage += ' La colonne demandée n\'existe pas.';
                    }
                    
                    alert(errorMessage);
                }
            });
            
            // Close modal handler
            closeModalBtn.addEventListener('click', function() {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
            });
            
            // Social links click handlers
            socialLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const platform = this.getAttribute('data-platform');
                    
                    // Show confetti effect
                    showConfetti();
                    
                    // Add visual feedback
                    this.style.transform = 'scale(1.2)';
                    setTimeout(() => {
                        this.style.transform = 'scale(1)';
                    }, 200);
                });
            });
            
            // Function to show confetti
            function showConfetti() {
                const container = document.getElementById('confettiContainer');
                const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];
                
                // Create multiple confetti pieces
                for (let i = 0; i < 50; i++) {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + 'vw';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 3 + 's';
                    confetti.style.animationDuration = (Math.random() * 3 + 2) + 's';
                    container.appendChild(confetti);
                    
                    // Remove confetti after animation
                    setTimeout(() => {
                        confetti.remove();
                    }, 5000);
                }
            }
        });
    </script>
</body>
</html>